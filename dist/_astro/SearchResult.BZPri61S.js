import{f as Ee,o as Qe,i as je,a as ae,c as g,s as Me,w as _,h as Ne}from"./favourite.D8urFDSY.js";import{a6 as Ie,a7 as Ve,u as h,a8 as Ae,o as Be,F as P,a9 as De,l as Ge,a as He,f as L,t as se,i as b,b as x,p as We,c as Ye,d as n,Z as w,r as c,e as v,g as j,m as Ze,s as pe,h as ge,_ as ze,Y as _e}from"./render.BE2Fuemi.js";import{e as Je,i as Ke}from"./each.CqI28z09.js";import{r as C,c as F}from"./store.BkX6ANw_.js";import{g as Oe}from"./exerciseService.hgv8slgW.js";import Ue from"./ExerciseCard.BT7Sbnyo.js";function Xe(a,i,o=i){var m=new WeakSet;Ie(a,"input",async l=>{var s=l?a.defaultValue:a.value;if(s=te(a)?re(s):s,o(s),P!==null&&m.add(P),await Ve(),s!==(s=i())){var d=a.selectionStart,$=a.selectionEnd;a.value=s??"",$!==null&&(a.selectionStart=d,a.selectionEnd=Math.min($,a.value.length))}}),(Be&&a.defaultValue!==a.value||h(i)==null&&a.value)&&(o(te(a)?re(a.value):a.value),P!==null&&m.add(P)),Ae(()=>{var l=i();if(a===document.activeElement){var s=De??P;if(m.has(s))return}te(a)&&l===re(a.value)||a.type==="date"&&!l&&!a.value||l!==a.value&&(a.value=l??"")})}function te(a){var i=a.type;return i==="number"||i==="range"}function re(a){return a===""?null:+a}async function ea({query:a=null,muscle:i=null,type:o=null,difficulty:m=null,equipment:l=null}){const s={};a&&(s.name=a),i&&(s.muscle=i),o&&(s.type=o),m&&(s.difficulty=m),l&&(s.equipment=l);try{return await Oe(s)}catch(d){throw console.error("Failed to fetch search results:",d),new Error("Failed to fetch search results.")}}var aa=L('<div class="text-center my-4"><div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div></div>'),sa=L('<div class="alert alert-danger" role="alert"> </div>'),ta=L('<div class="alert alert-warning text-center" role="alert">No exercises found. Try making a new search.</div>'),ra=L('<div class="card-group row row-cols-1 row-cols-md-3 g-4"></div> <div class="pagination-controls d-flex justify-content-between align-items-center mt-4"><button class="btn primary-button">Previous</button> <span> </span> <button class="btn primary-button">Next</button></div>',1),la=L('<div class="container-fluid container-background"><form class="d-flex flex-column align-items-end" id="searchForm"><div class="d-flex mb-3 w-100"><input class="form-control me-2" type="text" id="searchQuery" placeholder="Search exercises..."/> <button class="btn primary-button" type="submit">Search</button></div> <div id="typeFilter" class="d-flex flex-wrap justify-content-start"><div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="abdominalsCheckbox" value="abdominals"/> <label class="form-check-label" for="abdominalsCheckbox">Abdominals</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="bicepsCheckbox" value="biceps"/> <label class="form-check-label" for="bicepsCheckbox">Biceps</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="chestCheckbox" value="chest"/> <label class="form-check-label" for="chestCheckbox">Chest</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="glutesCheckbox" value="glutes"/> <label class="form-check-label" for="glutesCheckbox">Glutes</label></div> <div class="form-check form-check-inline"><input class="form-check-input" type="checkbox" id="hamstringsCheckbox" value="hamstrings"/> <label class="form-check-label" for="hamstringsCheckbox">Hamstrings</label></div></div></form> <!> <div class="container"><!></div></div>');function fa(a,i){Ye(i,!1);const[o,m]=Me(),l=()=>g(M,"$query",o),s=()=>g(ce,"$selectedType",o),d=()=>g(k,"$currentPage",o),$=()=>g(N,"$error",o),le=()=>g(E,"$searchResults",o),ke=()=>g(xe,"$paginatedResults",o),q=()=>g(I,"$totalResults",o);let E=_([]),M=_(""),N=_(""),k=_(1),I=_(0),ce=_([]),ye=_(""),R=Ze(!1);const S=9;let oe;const xe=Ee([E,k],([e,t])=>{const r=(t-1)*S;return e.slice(r,r+S)}),we=Ce(ne,1e3);function Ce(e,t){return function(...r){clearTimeout(oe),oe=setTimeout(()=>e.apply(this,r),t)}}Qe(async()=>{if(typeof window<"u"&&typeof sessionStorage<"u"){console.log("Running in the browser");const e=sessionStorage.getItem("searchQuery");console.log("Stored query:",e),e&&M.set(e)}});async function ne(e,t){pe(R,!0),N.set("");try{const r={};t.length>0&&(r.muscle=t.join(",")),r.limit=50;const y=await ea(r);let p=y;if(e){const u=e.toLowerCase();p=y.filter(f=>f.name.toLowerCase().includes(u)||f.muscle?.toLowerCase().includes(u)||f.type?.toLowerCase().includes(u)||f.equipment?.toLowerCase().includes(u)||f.difficulty?.toLowerCase().includes(u))}E.set(p),I.set(p.length),k.set(1)}catch{N.set("Failed to fetch search results."),E.set([]),I.set(0)}finally{pe(R,!1)}}function $e(e){e.preventDefault();const t=e.target.querySelector("#searchQuery").value;t&&(ye.set(t),sessionStorage.setItem("searchQuery",t),s().join(","),ne(t,0),k.set(1))}const ie=()=>{window.scrollTo({top:0,behavior:"smooth"})};function Re(){k.update(e=>e+1),ie()}function Se(){k.update(e=>e>1?e-1:e),ie()}function T(e){ce.update(t=>t.includes(e)?t.filter(r=>r!==e):[...t,e])}Ge(()=>(l(),s(),d()),()=>{(l()||s().length>0)&&we(l(),(d()-1)*S,s())}),He(),je();var V=la(),Q=n(V),A=n(Q),ue=n(A);C(ue),w(2),c(A);var de=v(A,2),B=n(de),D=n(B);C(D),w(2),c(B);var G=v(B,2),H=n(G);C(H),w(2),c(G);var W=v(G,2),Y=n(W);C(Y),w(2),c(W);var Z=v(W,2),z=n(Z);C(z),w(2),c(Z);var fe=v(Z,2),J=n(fe);C(J),w(2),c(fe),c(de),c(Q);var ve=v(Q,2);{var Te=e=>{var t=aa();x(e,t)};ae(ve,e=>{j(R)&&e(Te)})}var he=v(ve,2),Pe=n(he);{var Fe=e=>{var t=sa(),r=n(t,!0);c(t),se(()=>ge(r,$())),x(e,t)},Le=e=>{var t=ze(),r=_e(t);{var y=u=>{var f=ta();x(u,f)},p=u=>{var f=ra(),K=_e(f);Je(K,5,ke,Ke,(X,ee)=>{Ue(X,{get exercise(){return j(ee)}})}),c(K);var me=v(K,2),O=n(me),U=v(O,2),qe=n(U);c(U);var be=v(U,2);c(me),se((X,ee)=>{O.disabled=d()===1,ge(qe,`Page ${d()??""} of ${X??""}`),be.disabled=ee},[()=>(q(),h(()=>Math.ceil(q()/S))),()=>(d(),q(),h(()=>d()===Math.ceil(q()/S)))]),b("click",O,Se),b("click",be,Re),x(u,f)};ae(r,u=>{le(),j(R),h(()=>le().length===0&&!j(R))?u(y):u(p,!1)},!0)}x(e,t)};ae(Pe,e=>{$()?e(Fe):e(Le,!1)})}c(he),c(V),se((e,t,r,y,p)=>{F(D,e),F(H,t),F(Y,r),F(z,y),F(J,p)},[()=>(s(),h(()=>s().includes("abdominals"))),()=>(s(),h(()=>s().includes("biceps"))),()=>(s(),h(()=>s().includes("chest"))),()=>(s(),h(()=>s().includes("glutes"))),()=>(s(),h(()=>s().includes("hamstrings")))]),Xe(ue,l,e=>Ne(M,e)),b("change",D,()=>T("abdominals")),b("change",H,()=>T("biceps")),b("change",Y,()=>T("chest")),b("change",z,()=>T("glutes")),b("change",J,()=>T("hamstrings")),b("submit",Q,$e),x(a,V),We(),m()}export{fa as default};
