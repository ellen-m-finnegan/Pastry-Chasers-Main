import{i as ue,a as Q}from"./favourite.D8urFDSY.js";import{m as k,l as V,a as pe,f as w,t as W,i as O,b as _,p as ve,c as fe,X as J,g as e,u as y,h as K,d as v,e as g,r as d,s as a,_ as ge,Y as me}from"./render.BE2Fuemi.js";import{e as Z,i as $}from"./each.CqI28z09.js";import{p as ee,r as be,b as he,s as se,c as _e}from"./store.BkX6ANw_.js";import xe from"./ExerciseCard.BT7Sbnyo.js";import{g as ye}from"./exerciseService.hgv8slgW.js";const U="selectedOption",E=()=>{const f=sessionStorage.getItem(U);return f?f.split(","):[]},we=f=>{const u=E();u.includes(f)||(u.push(f),sessionStorage.setItem(U,u.join(",")))},ke=f=>{let u=E();u=u.filter(m=>m!==f),sessionStorage.setItem(U,u.join(","))};var Oe=w('<li class="mb-2"><div class="form-check"><input class="form-check-input" type="checkbox"/> <label class="form-check-label"> </label></div></li>'),Ee=w('<div class="text-center my-4"><div class="spinner-border text-info" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Pe=w('<div class="col-md-4"><!></div>'),Se=w("<div>Error: Invalid exercise data</div>"),Ae=w('<div class="container-fluid container-background"><div class="title-button-container"><h4 class="bg-secondary text-white px-2 py-1 rounded" style="display: inline-block;"> </h4> <div class="button-container d-flex"><button class="btn secondary-button me-2">Refresh Exercises</button> <div class="dropdown"><button class="btn secondary-button dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">Add Options</button> <ul class="dropdown-menu p-3" aria-labelledby="dropdownMenuButton"></ul></div></div></div> <!> <div class="card-group row row-cols-1 row-cols-md-3 g-4"></div> <div class="pagination-controls d-flex justify-content-between align-items-center mt-4"><button class="btn primary-button">Previous</button> <span class="page-number"> </span> <button class="btn primary-button">Next</button></div></div>');function Me(f,u){fe(u,!1);let m=ee(u,"exercisesPerPage",8),o=ee(u,"currentPage",12),r=k({exercises:[]}),x=k([]),c=k(E()),P=k(!1),S=!1;const te=t=>{if(t){const s=new URL(window.location);s.searchParams.set("selectedOptions",t.join(",")),window.history.pushState({},"",s)}},A=t=>{if(!e(r)||!Array.isArray(e(r).exercises))return[];const s=(t-1)*m(),i=s+m();return e(r).exercises.slice(s,i)},I=async(t=!1)=>{if(!S){S=!0,a(P,!0);try{const i=`allExercises_${e(c).slice().sort().join("_")}`,b=sessionStorage.getItem(i);if(b&&!t)a(r,JSON.parse(b)),(!e(r)||!Array.isArray(e(r).exercises))&&a(r,{exercises:[]});else{const n={};e(c).length>0&&e(c).forEach(l=>{["abdominals","abductors","adductors","biceps","calves","chest","forearms","glutes","hamstrings","lats","lower_back","middle_back","neck","quadriceps","traps","triceps"].includes(l)?n.muscle=l:["strength","stretching","cardio","strongman","powerlifting","plyometrics","olympic_weightlifting"].includes(l)&&(n.type=l)}),n.limit=27;let p=await ye(n);Array.isArray(p)?a(r,{exercises:p}):p&&Array.isArray(p.exercises)?a(r,p):a(r,{exercises:[]}),sessionStorage.setItem(i,JSON.stringify(e(r)))}o(1),a(x,A(o()))}catch(s){console.error("Failed to fetch exercises:",s),a(r,{exercises:[]}),a(x,[])}finally{a(P,!1),S=!1}}},re=()=>{window.scrollTo({top:0,behavior:"smooth"})},q=t=>{a(x,A(t)),o(t),re()},ae=()=>{o()>1&&q(o()-1)},ie=()=>{o()<Math.ceil((e(r).exercises?.length??0)/m())&&q(o()+1)},B=t=>t?t.charAt(0).toUpperCase()+t.slice(1):"",oe=t=>{const s=t.target.value;t.target.checked?we(s):ke(s),a(c,E())},ce=["abdominals","abductors","adductors","biceps","calves","chest","forearms","glutes","hamstrings","lats","lower_back","middle_back","neck","quadriceps","traps","triceps","strength","stretching","cardio","strongman","powerlifting","plyometrics","olympic_weightlifting"];V(()=>(e(c),e(r),J(o())),()=>{const s=`allExercises_${e(c).slice().sort().join("_")}`,i=sessionStorage.getItem(s);e(c).length>0&&i?(a(r,JSON.parse(i)),(!e(r)||!Array.isArray(e(r).exercises))&&a(r,{exercises:[]})):I(!0),a(x,A(o()))}),V(()=>e(c),()=>{te(e(c))}),pe(),ue();var j=Ae(),L=v(j),C=v(L),ne=v(C,!0);d(C);var F=g(C,2),Y=v(F),z=g(Y,2),D=g(v(z),2);Z(D,5,()=>ce,$,(t,s)=>{var i=Oe(),b=v(i),n=v(b);be(n);var p=g(n,2),l=v(p,!0);d(p),d(b),d(i),W((h,R)=>{he(n,e(s)),se(n,"id",e(s)),_e(n,h),se(p,"for",e(s)),K(l,R)},[()=>(e(c),e(s),y(()=>e(c).includes(e(s)))),()=>(e(s),y(()=>B(e(s))))]),O("change",n,oe),_(t,i)}),d(D),d(z),d(F),d(L);var X=g(L,2);{var le=t=>{var s=Ee();_(t,s)};Q(X,t=>{e(P)&&t(le)})}var N=g(X,2);Z(N,5,()=>e(x),$,(t,s)=>{var i=ge(),b=me(i);{var n=l=>{var h=Pe(),R=v(h);xe(R,{get exercise(){return e(s)}}),d(h),_(l,h)},p=l=>{var h=Se();_(l,h)};Q(b,l=>{e(s),y(()=>e(s)&&e(s).name)?l(n):l(p,!1)})}_(t,i)}),d(N);var G=g(N,2),T=v(G),M=g(T,2),de=v(M);d(M);var H=g(M,2);d(G),d(j),W((t,s)=>{K(ne,t),T.disabled=o()===1,K(de,`Page ${o()??""}`),H.disabled=s},[()=>(e(c),y(()=>e(c).map(B).join(", "))),()=>(J(o()),e(r),J(m()),y(()=>o()===Math.ceil(e(r).exercises.length/m())))]),O("click",Y,()=>I(!0)),O("click",T,ae),O("click",H,ie),_(f,j),ve()}export{Me as default};
